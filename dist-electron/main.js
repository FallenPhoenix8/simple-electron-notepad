"use strict";const e=require("electron"),s=require("node:path"),i=require("fs"),c=process.platform==="darwin",d=[...c?[{label:e.app.name,submenu:[{role:"about"},{type:"separator"},{role:"quit"}]}]:[],{label:"File",submenu:[{label:"Open File",accelerator:"CmdOrCtrl+O",click:()=>{console.log("Opening file..."),e.dialog.showOpenDialog({properties:["openFile"],filters:[{name:"Any files",extensions:["*"]}]}).then(l=>{i.readFile(l.filePaths[0],{encoding:"utf8"},(n,t)=>{if(n){console.log(`Error: ${n}`);return}console.log(`Content: ${t}`),o==null||o.webContents.send("test",t)})}).catch(l=>console.log(l))}},{label:"Save File",accelerator:"CmdOrCtrl+S",click:()=>{console.log("Saving file..."),e.dialog.showSaveDialog({}).then(l=>{var t;let n=(t=l.filePath)==null?void 0:t.toString();console.log(l.filePath),console.log(r),i.writeFile(n,r,{},a=>{a&&console.log(a)})})}}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},...c?[{role:"pasteAndMatchStyle"},{role:"delete"},{role:"selectAll"},{type:"separator"}]:[{role:"delete"},{type:"separator"},{role:"selectAll"}]]}];module.exports.mainMenu=e.Menu.buildFromTemplate(d);process.env.DIST=s.join(__dirname,"../dist");process.env.VITE_PUBLIC=e.app.isPackaged?process.env.DIST:s.join(process.env.DIST,"../public");let o;const p=process.env.VITE_DEV_SERVER_URL;function u(){o=new e.BrowserWindow({icon:s.join(process.env.VITE_PUBLIC,"notepad.ico"),webPreferences:{preload:s.join(__dirname,"preload.js")}}),o.webContents.on("did-finish-load",()=>{o==null||o.webContents.send("main-process-message",new Date().toLocaleString())}),p?o.loadURL(p):o.loadFile(s.join(process.env.DIST,"index.html"))}e.Menu.setApplicationMenu(e.Menu.buildFromTemplate(d));e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(e.app.quit(),o=null)});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&u()});let r="";e.ipcMain.on("test2",(l,n)=>{console.log(`Process: ${l.processId}`),r=n,console.log(`Content: ${r}`)});e.app.whenReady().then(u);
